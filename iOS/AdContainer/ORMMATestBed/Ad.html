<script type="text/javascript">
   window.onload = function ()
   {
      // we need to wait until the page has loaded to make sure that all of the
	  // ORMMA code is setup
	  // once it is, let's register for the "ready" event
      ormma.addEventListener( "ready", ORMMA_Ready );
      ormma.addEventListener( "stateChange", ORMMA_StateChange );
   }
   
   function ORMMA_Ready()
   {
      // the ORMMA engine is ready to deal with us, so tell it to show the ad
	  ormma.show();
	  
	  // now add some event listeners
      ormma.addEventListener( "orientationChange", ORMMA_OrientationChange );
      ormma.addEventListener( "headingChange", ORMMA_HeadingChange );
      ormma.addEventListener( "tiltChange", ORMMA_TiltChange );
      ormma.addEventListener( "rotationChange", ORMMA_RotationChange );
   }
   
   function ORMMA_StateChange( state )
   {
      // show the correct content when the state changes
      var defaultDiv = document.getElementByID( "default" );
      var expandedDiv = document.getElementByID( "expanded" );
	  if ( state == "default" )
	  {
	     defaultDiv.style.visibility = "visible";
	     expandedDiv.style.visibility = "hidden";
	  }
	  else if ( state == "expanded" )
	  {
	     defaultDiv.style.visibility = "hidden";
	     expandedDiv.style.visibility = "visible";
	  }
      var stateSpan = document.getElementByID( "currentState" );
	  stateSpan.innerHTML = state;
   }

   function ORMMA_OrientationChange( orientationChangeEvent )
   {
      var orientationSpan = document.getElementByID( "orientation" );
	  orientationSpan.innerHTML = orientationChangeEvent.orientation;
   }

   function ORMMA_HeadingChange( headingChangeEvent )
   {
      var orientationSpan = document.getElementByID( "orientation" );
      var m = document.getElementById( "headingMagnetic" );
      var t = document.getElementById( "headingTrue" );
      var a = document.getElementById( "headingAccuracy" );
	  m.innerHTML = headingChangeEvent.magneticHeading;
	  t.innerHTML = headingChangeEvent.trueHeading;
	  a.innerHTML = headingChangeEvent.accuracy;
   }

   function ORMMA_TiltChange( tiltEvent )
   {
   //alert( "Tilt: " + tiltEvent.x + ", " + tiltEvent.y + ", " + tiltEvent.z );
      var x = document.getElementById( "accX" );
      var y = document.getElementById( "accY" );
      var z = document.getElementById( "accZ" );
	  x.innerHTML = tiltEvent.x;
	  y.innerHTML = tiltEvent.y;
	  z.innerHTML = tiltEvent.z;
   }

   function ORMMA_RotationChange( rotationEvent )
   {
   //alert( "GYRO: " + rotationEvent.x + ", " + rotationEvent.y + ", " + rotationEvent.z );
      var x = document.getElementById( "gyroX" );
      var y = document.getElementById( "gyroY" );
      var z = document.getElementById( "gyroZ" );
	  x.innerHTML = rotationEvent.x;
	  y.innerHTML = rotationEvent.y;
	  z.innerHTML = rotationEvent.z;
   }
   
   function ResizeAd()
   {
      if ( ormma.getState() == "default" )
	  {
	     // grow the screen
         var d = new ORMMAResizeDimensions( 10, 0, 300, 250 );
	     ormma.resize( d );
	  }
	  else
	  {
	     // restore our state
	     ormma.close();
	  }
	  
	  return false;
   }
   
   function RestoreToDefault()
   {
	  ormma.close();
	  return false;
   }
   
</script>

<div id="default" style="visibility=visible;">
   <a href="javascript:ormma.hide();">Hide</a>&nbsp;&nbsp;<a href="javascript:ResizeAd();">Resize</a>
</div>

<div id="expanded" style="visibility=hidden;">
   Orientation: <span id="orientation"></span><br>
   State: <span id="currentState"></span><br>
   Accelerometer: X: <span id="accX"></span>, Y: <span id="accY"></span>, Z: <span id="accZ"></span><br>
   Gyroscope: X: <span id="gyroX"></span>, Y: <span id="gyroY">, Z: <span id="gyroZ"></span></span><br>
   Heading: M: <span id="headingMagnetic"></span>, T: <span id="headingTrue"></span>, A: <span id="headingAccuracy"></span><br>
</div>