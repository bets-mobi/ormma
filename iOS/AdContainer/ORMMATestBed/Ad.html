<script type="text/javascript">
   window.onload = function ()
   {
      // we need to wait until the page has loaded to make sure that all of the
	  // ORMMA code is setup
	  // once it is, let's register for the "ready" event
      ormma.addEventListener( "ready",       ORMMAReadyEventHandler );
      ormma.addEventListener( "stateChange", StateChangedEventHandler );
   }
   
   
   function ExpandAd()
   {
      var initial = new ORMMADimensions();
	  initial.x = 320 / 2;
	  initial.y = 460 / 2;
	  initial.width = 0;
	  initial.height = 0;
      var final = new ORMMADimensions();
	  final.x = 0;
	  final.y = 0;
	  final.width = 320;
	  final.height = 460;
      ormma.expand( initial, final, "http://www.toyota.com" );
   }


   function LocationChangedEventHandler( locationEvent )
   {
      var lattitude = document.getElementById( "locLattitude" );
      var longitude = document.getElementById( "locLongitude" );
      var altitude = document.getElementById( "locAltitude" );
      var horizontalAccuracy = document.getElementById( "locHorizontalAccuracy" );
      var verticalAccuracy = document.getElementById( "locVerticalAccuracy" );
      var ts = document.getElementById( "locTimestamp" );
      var course = document.getElementById( "locCourse" );
      var speed = document.getElementById( "locSpeed" );
	  lattitude.innerHTML = locationEvent.lattitude;
	  longitude.innerHTML = locationEvent.longitude;
	  altitude.innerHTML = locationEvent.altitude;
	  horizontalAccuracy.innerHTML = locationEvent.horizontalAccuracy;
	  verticalAccuracy.innerHTML = locationEvent.verticalAccuracy;
	  course.innerHTML = locationEvent.course;
	  speed.innerHTML = locationEvent.speed;
	  ts.innerHTML = locationEvent.timestamp;
   }


   function HeadingChangedEventHandler( headingChangeEvent )
   {
      var m = document.getElementById( "headingMagnetic" );
      var t = document.getElementById( "headingTrue" );
      var a = document.getElementById( "headingAccuracy" );
	  m.innerHTML = headingChangeEvent.magneticHeading;
	  t.innerHTML = headingChangeEvent.trueHeading;
	  a.innerHTML = headingChangeEvent.accuracy;
   }
   
   
   function KeyboardChangedEventHandler( keyboardChangeEvent )
   {
      if ( keyboardChangeEvent.open )
	  {
	     // do something when the keyboard opens
	  }
	  else
	  {
	     // do something when the keyboard closes
	  }
   }


   function OrientationChangedEventHandler( orientationChangeEvent )
   {
      var orientationSpan = document.getElementById( "orientation" );
	  orientationSpan.innerHTML = orientationChangeEvent.orientation;
   }

   
   function ORMMAReadyEventHandler()
   {
      // the ORMMA engine is ready to deal with us, so tell it to show the ad
	  ormma.show();
	  
	  // now add some event listeners
      ormma.addEventListener( "headingChange",     HeadingChangedEventHandler );
      ormma.addEventListener( "keyboardChange",    KeyboardChangedEventHandler );
      ormma.addEventListener( "locationChange",    LocationChangedEventHandler );
      ormma.addEventListener( "orientationChange", OrientationChangedEventHandler );
      ormma.addEventListener( "tiltChange",        TiltChangedEventHandler );
      ormma.addEventListener( "rotationChange",    RotationChangedEventHandler );
      ormma.addEventListener( "screenSizeChange",  ScreenSizeChangedEventHandler );
      ormma.addEventListener( "sizeChange",        SizeChangedEventHandler );
   }
   
   
   function ResizeAd()
   {
      // grow the screen
      ormma.resize( 250, 320 );
	  
	  return false;
   }
   
   
   function RestoreToDefault()
   {
	  ormma.close();
	  return false;
   }


   function RotationChangedEventHandler( rotationEvent )
   {
      var x = document.getElementById( "gyroX" );
      var y = document.getElementById( "gyroY" );
      var z = document.getElementById( "gyroZ" );
	  x.innerHTML = rotationEvent.x;
	  y.innerHTML = rotationEvent.y;
	  z.innerHTML = rotationEvent.z;
   }

   
   function StateChangedEventHandler( state )
   {
      // show the correct content when the state changes
      var defaultDiv = document.getElementById( "default" );
      var expandedDiv = document.getElementById( "expanded" );
	  if ( state.state == "default" )
	  {
	     defaultDiv.style.visibility = "visible";
	     expandedDiv.style.visibility = "hidden";
	  }
	  else if ( state.state == "expanded" )
	  {
	     defaultDiv.style.visibility = "hidden";
	     expandedDiv.style.visibility = "visible";
	  }
      var stateSpan = document.getElementById( "currentState" );
	  stateSpan.innerHTML = state.state;
   }


   function ScreenSizeChangedEventHandler( screenSizeChangeEvent )
   {
      // size of screen has changed
   }


   function SizeChangedEventHandler( sizeChangeEvent )
   {
      // size of ad has changed
   }


   function TiltChangedEventHandler( tiltEvent )
   {
      var x = document.getElementById( "accX" );
      var y = document.getElementById( "accY" );
      var z = document.getElementById( "accZ" );
	  x.innerHTML = tiltEvent.x;
	  y.innerHTML = tiltEvent.y;
	  z.innerHTML = tiltEvent.z;
   }
   
</script>

<div id="default" style="visibility=visible;">
   <a href="javascript:ormma.hide();">Hide</a>
   &nbsp;&nbsp;
   <a href="javascript:ResizeAd();">Resize</a>
   &nbsp;&nbsp;
   <a href="javascript:ExpandAd();">Expand</a>
</div>

<div id="expanded" style="visibility=hidden;">
   <a href="javascript:RestoreToDefault();">Close</a><br>
   Orientation: <span id="orientation"></span><br>
   State: <span id="currentState"></span><br>
   Acc: X: <span id="accX"></span>, Y: <span id="accY"></span>, Z: <span id="accZ"></span><br>
   Gyro: X: <span id="gyroX"></span>, Y: <span id="gyroY"></span>, Z: <span id="gyroZ"></span><br>
   Head: M: <span id="headingMagnetic"></span>, T: <span id="headingTrue"></span>, A: <span id="headingAccuracy"></span><br>
   Loc: Lat: <span id="locLattitude"></span>, Lng: <span id="locLongitude"></span><br>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alt: <span id="locAltitude"></span><br>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HA:<span id="locHorizontalAccuracy"></span>, VA:<span id="locVerticalAccuracy"></span><br>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Course:<span id="locCourse"></span>, Speed:<span id="locSpeed"></span><br>
</div>