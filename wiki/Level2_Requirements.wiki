#summary Level 2 Requirements
#sidebar SideBar

=Ad Controller Requirements: Level 2=

===Access to Native Features===
Using standard web technologies in the ad design, and relying on a web viewer in the app to render ads supports many of the presentation needs. For truly rich media advertising, there must also be support for device features that are normally only available to application developers. Devices offer a wide array of functionality beyond simple display of ad content for rich media ads. The Controller provides a layer of abstraction between the ad designer and the device to greater enable cross-device media creation.

Dynamic properties require an event listener strategy. Using just the addEventListener method allows the ad developer to access all native features the SDK supports.

Knowing what features are available to listen for, and what the event names are requires a naming convention. For each feature a Controller supports, the getter method is “get”+feature name and the event name is feature name+”Change”. For example, if a Controller supports the device’s native location capabilities, the supported feature is “location”, to get the location the ad developer would call “getLocation”, and to listen for changes the ad developer  would addEventListener for "location".

As devices differentiate, or hardware vendors innovate, additional native features can be added using the same naming convention.

*supports* method

Use this method to determine whether a specific device feature is supported. Although these features, getters, and events are identified as Level 2 compliance, the supports method must be implemented by all SDK vendors.

The controller should support as many of the following features as is possible for a given device.

|| *value*             || *description* ||
||network        ||the device can report on its network connectivity and connectivity changes||
||orientation   ||the device can report on its orientation and orientation changes||
||screen            ||the device can report on the screen size||
||heading        ||the device can report on the compass direction it is pointing||
||location        ||the device can report on its location||
||shake            ||the device can report on being shaken||
||sms               ||the device can send an SMS message||
||tilt                  ||the device can report on its tilt and tilt changes||
||phone           ||the device can make a phone call||
||email            ||the device can compose an email||
||calendar       ||the device can create a calendar entry||
||photo           ||the device can take a picture||
||level-1         ||the SDK supports ORMMA level 1 functionality*||
||level-2         ||the SDK supports ORMMA level 2 functionality*||
||level-3         ||the SDK supports ORMMA level 3 functionality*||

*createEvent* method

The createEvent method opens the device UI to create a new calendar event with default values provided. The ad is suspended while the UI is open.

*getHeading* method

The getHeading method returns the last compass heading of the device. The heading may be unknown or out-of date. To activate the compass and receive updates use addEventListener for "heading" events.

*getLocation* method

The getLocation method returns the last location reading and accuracy of the device. The location may be unknown or out-of-date. To activate the location system and receive updates use addEventListener for "location" events.

*getNetwork* method

The getNetwork method returns the current network connection type for the device. To receive updates on network changes use addEventListener for "network" events.

*getOrientation* method

The getOrientation method returns the current device orientation. To receive updates on orientation changes use addEventListener for "orientation" events.

*getScreenSize* method

The getScreenSize method returns the current size of the device screen. To receive updates on screen size changes use addEventListener for "screen" events.

*getShakeProperties* method

The getShakeProperties method returns the current thresholds that define a shake gesture. The defaults should be sufficient in most cases.

*makeCall* method

The makeCall method opens the device UI for making a phone call to a specified number. The ad is suspended while the UI is open.

*sendMail* method

The sendMail method opens the device UI for sending an email message with the content provided. The ad is suspended while the UI is open.

*sendSMS* method

The sendSMS method opens the device UI for sending an SMS message with the content provided. The ad is suspended while the UI is open. 

*setShakeProperties* method

The setShakeProperties will set ad specific thresholds for what is interpreted by the SDK as a shake gesture.

===Handling Call-to-Action Events===
A rich media ad implements multiple call-to-action events beyond the click to microsite. These events may be executed as anchor links or scripted functions. This means an SDK cannot just listen for clicks in the browser. It must support programmatic clicks as well.

===Hyperlinks===
Rich media designers need access to the minimum calls to action
  * click to visit microsite in-app
  * click to visit microsite with device browser
  * click to play video in-app
  * click to play audio in-app
  * click to send form data
  * click to Google maps
  * click to email
  * click to calendar
  * click to iTunes

===Request Handling===
As mentioned, each call to action may be called as standard anchor tag href attributes or as the result of !JavaScript onclick events. For the SDK, instead of trying to discover every URL, it should support a request handling strategy. The ad developer should use the function wrapper for all click events so they can be processed by the SDK for native applications. A request wrapper allows the ad designer control over how the web viewer handles various click or other request events.

*request* method
Use this method to trigger a request action. The method supports an option to identify the request type, which is especially important for capturing tracking requests offline and executing them whenever the device reconnects (level 3).

|| *display value*	|| *description* ||
||ignore	||no display, reporting URL only -- OK to ignore response||
||proxy	||no display, response managed by script -- used for ajax calls||

*response* event
This event is thrown when a request action with a display type of "proxy" returns a response. The event contains the URI of the original request action and the full body of the response.